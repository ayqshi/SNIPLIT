<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SNIPLIT">
    <meta name="application-name" content="SNIPLIT">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Pro Audio Discovery Engine & Music Analytics">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" href="src/SNIPLIT.png" type="image/x-icon">
    <link rel="icon" href="src/SNIPLIT.png" type="image/png" sizes="32x32">
    <link rel="icon" href="src/SNIPLIT.png" type="image/png" sizes="16x16">
    <link rel="icon" href="src/SNIPLIT.png" type="image/svg+xml">
    <link rel="apple-touch-icon" sizes="180x180" href="src/SNIPLIT.png">

    <!-- PWA Manifest with custom Base64 Icon -->
    <link rel="manifest" href="index.json">

    <title>SNIPLIT</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

  <link href="src/app.css" rel="stylesheet">
</head>

<body class="flex items-center justify-center h-screen w-screen bg-black">
    <!-- Splash Screen -->
    <div id="splash-screen">
        <h1 class="text-5xl font-black tracking-tighter text-white mb-2">SNIPLIT</h1>
        <p class="text-[10px] font-mono text-zinc-500 uppercase tracking-[0.3em]">Find your music taste.</p>
        <div class="splash-loader"></div>
    </div>
    <!-- Onboarding Flow -->
    <div id="onboarding-layer" class="hidden flex flex-col p-8">
        <!-- Step 1: Terms -->
        <div id="ob-terms" class="max-w-md mx-auto w-full flex flex-col h-full">
            <h2 class="text-2xl font-bold mb-6">User Agreement</h2>
            <div
                class="flex-1 overflow-y-auto border border-zinc-800 rounded-xl p-4 text-xs text-zinc-400 space-y-4 mb-6 bg-zinc-900/50 font-mono leading-relaxed">
                <p><strong>SNIPLIT User Agreement</strong></p>
                <p>By accessing or using SNIPLIT, a mobile-focused web application for music discovery and analytics,
                    you acknowledge that you have read, understood, and agreed to this User Agreement.</p>
                <p>SNIPLIT is a web app designed to help users discover music by streaming content, displaying lyrics
                    where available, and analyzing listening behavior. SNIPLIT relies on public and third-party APIs.
                    SNIPLIT does not host, own, or claim ownership over any music.</p>
                <p>You must be at least 13 years of age to use SNIPLIT.</p>
                <p>SNIPLIT collects certain information such as usage patterns to improve performance and personalize
                    recommendations. We do not sell personal data.</p>
                <p>SNIPLIT is provided "as is". We make no warranties regarding accuracy or availability.</p>
                <p>By continuing, you confirm that you understand and accept this User Agreement in full.</p>
            </div>
            <button onclick="Onboarding.agreeTerms()"
                class="w-full py-4 bg-white text-black font-bold uppercase tracking-widest rounded-full hover:scale-[1.02] transition">I
                Agree</button>
        </div>
        <div id="ob-survey"
            class="hidden max-w-md mx-auto w-full flex flex-col h-full justify-center space-y-8 slide-enter">
            <div>
                <h2 class="text-3xl font-black mb-2">SNIPLIT Identity</h2>
                <p class="text-zinc-500 text-sm">Let's calibrate your audio profile.</p>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="text-xs font-bold uppercase text-zinc-500 ml-2">username</label>
                    <input type="text" id="survey-name"
                        class="w-full bg-zinc-900 border border-zinc-800 p-4 rounded-2xl text-white font-bold outline-none focus:border-white transition"
                        placeholder="Enter your name">
                </div>

                <div>
                    <label class="text-xs font-bold uppercase text-zinc-500 ml-2 mb-2 block">Favorable genres</label>
                    <div class="mt-4">
    <label class="block text-xs font-bold text-zinc-500 uppercase mb-2">Select Favorite Genre</label>
    <select id="ob-genre-select" class="w-full bg-zinc-800 text-white p-3 rounded-xl border border-zinc-700 outline-none appearance-none">
        <option value="Pop">Pop</option>
        <option value="Rock">Rock</option>
        <option value="Hip-Hop">Hip-Hop</option>
        <option value="Electronic">Electronic</option>
        <option value="Alternative">Alternative</option>
        <option value="R&B">R&B</option>
        <option value="Indie">Indie</option>
    </select>
</div>
                </div>
            </div>

            <button onclick="Onboarding.finish()"
                class="w-full py-4 bg-white text-black font-bold uppercase tracking-widest rounded-full mt-8 hover:scale-[1.02] transition">Initialize</button>
        </div>
    </div>

    <div id="app-container"
        class="relative w-full h-full max-w-[480px] max-h-[950px] bg-black md:border-[8px] md:border-[#1a1a1a] md:rounded-[3rem] overflow-hidden flex flex-col shadow-[0_0_100px_rgba(0,0,0,1)]">

        <!-- Status Bar -->
        <div
            class="h-10 w-full flex items-center justify-between px-8 text-[12px] font-semibold opacity-0 z-50 pointer-events-none absolute top-0 bg-gradient-to-b from-black/80 to-transparent">
            <span id="system-time" class="font-mono">--:--</span>
            <div class="flex gap-1.5 items-center">
                <i data-lucide="wifi" class="w-3 h-3"></i>
                <i data-lucide="battery" class="w-3 h-3"></i>
            </div>
        </div>

        <!-- App Header -->
        <header class="pt-12 px-6 pb-2 flex justify-between items-center z-40 relative">
            <div>
                <h1 class="text-2xl font-black tracking-tight">SNIPLIT</h1>
                <p id="greeting" class="text-[10px] text-zinc-500 font-bold uppercase tracking-widest">System Ready</p>
            </div>
            <div class="flex gap-3">
                <button onclick="UI.showWrapped()"
                    class="p-2.5 bg-zinc-900/50 rounded-full hover:bg-white/10 transition border border-white/5">
                    <i data-lucide="bar-chart-2" class="w-5 h-5 text-zinc-300"></i>
                </button>
                <button onclick="UI.openSettings()"
                    class="p-2.5 bg-zinc-900/50 rounded-full hover:bg-white/10 transition border border-white/5">
                    <i data-lucide="settings-2" class="w-5 h-5 text-zinc-300"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main id="view-port" class="flex-1 overflow-y-auto no-scrollbar px-6 pb-32 relative z-10 scroll-smooth">

            <!-- Home View -->
            <section id="view-home" class="view-section space-y-8 pt-4 pb-10">
<div id="notification-bar" class="flex items-center gap-3 bg-transparent-900/50  p-2.5 rounded-xl border border-white/5 hover:bg-white/10 transition cursor-pointer">
                            <i data-lucide="bell" class="w-10 h-10 rounded-lg object-cover shadow-sm"></i>
                            <div class="min-w-0 flex-1">
                                <p id="notification_bar-title" class="text-[11px] font-bold truncate text-white">Download the mobile app.</p>
                                <p id="notification_bar-sub" class="text-[9px] text-zinc-500 font-bold truncate uppercase">Add to Home Screen or download<a style="color: pink;" href="https://github.com/ayqshi/SNIPLIT" target="_blank">  -here-</a></p>

                            </div>
                        </div>
                <!-- Jump Back In -->
                <div>
                    <h2 class="text-xs font-bold text-zinc-600 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <i data-lucide="history" class="w-3 h-3"></i> Jump Back In</h2>
                    <div id="recents-grid" class="grid grid-cols-2 gap-3">
                        <div class="skeleton h-14 col-span-1"></div>
                        <div class="skeleton h-14 col-span-1"></div>
                    </div>
                </div>

                <!-- For You -->
                <div>
                    <h2 class="text-xs font-bold text-zinc-600 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <i data-lucide="sparkles" class="w-3 h-3"></i> For You</h2>
                    <div id="for-you-grid" class="flex gap-4 overflow-x-auto no-scrollbar pb-4 snap-x">
                        <div class="skeleton w-32 h-40 flex-shrink-0 rounded-xl"></div>
                        <div class="skeleton w-32 h-40 flex-shrink-0 rounded-xl"></div>
                        <div class="skeleton w-32 h-40 flex-shrink-0 rounded-xl"></div>
                    </div>
                </div>

                <!-- Artists You Follow -->
                <div id="followed-section" class="hidden">
                    <div class="flex justify-between items-end mb-4">
                        <h2 class="text-xs font-bold text-zinc-600 uppercase tracking-widest flex items-center gap-2"><i
                                data-lucide="user-check" class="w-3 h-3"></i> Following</h2>
                        <button onclick="UI.toggleView('search')"
                            class="text-[10px] text-white font-bold uppercase hover:underline">Find More</button>
                    </div>
                    <div id="followed-grid" class="flex gap-4 overflow-x-auto no-scrollbar pb-4"></div>
                </div>

                <!-- Discovery Engine -->
            <div class="mt-8">
    <div class="flex justify-between items-end mb-4">
        <h3 class="text-lg font-bold text-white">For You</h3>
        <div class="flex gap-2" id="discovery-tabs">
            <button onclick="UI.discoverGenre('Trending')" class="px-3 py-1 bg-zinc-800 text-zinc-400 text-[10px] font-bold uppercase rounded-lg transition hover:bg-white/10 hover:text-white">Trending</button>
            <button onclick="UI.discoverGenre('Pop')" class="px-3 py-1 bg-zinc-800 text-zinc-400 text-[10px] font-bold uppercase rounded-lg transition hover:bg-white/10 hover:text-white">Pop</button>
            <button onclick="UI.discoverGenre('Rock')" class="px-3 py-1 bg-zinc-800 text-zinc-400 text-[10px] font-bold uppercase rounded-lg transition hover:bg-white/10 hover:text-white">Rock</button>
        </div>
    </div>
    <div id="for-you-grid" class="grid grid-cols-2 sm:grid-cols-3 gap-4 overflow-x-auto pb-24">
        <!-- Injected via JS -->
    </div>
</div>
            </section>

            <!-- Search View -->
            <section id="view-search" class="view-section hidden space-y-6 pt-4 pb-20">
                <div class="sticky top-0 bg-black z-20 pb-2">
                    <div class="relative group">
                        <i data-lucide="search"
                            class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500 group-focus-within:text-white transition"></i>
                        <input type="text" id="main-search" placeholder="Search artists, songs, albums..."
                            class="w-full bg-zinc-900 border border-zinc-800 rounded-2xl py-4 pl-12 pr-4 text-sm focus:outline-none focus:border-zinc-600 transition-all font-medium text-white placeholder-zinc-600 shadow-lg">
                    </div>
                </div>

                <!-- Recent Searches -->
                <div id="search-history-panel" class="hidden">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-[10px] font-bold uppercase text-zinc-600 tracking-widest">Recent</h3>
                        <button onclick="Database.clearSearchHistory()"
                            class="text-[10px] text-red-500 font-bold uppercase hover:underline">Clear</button>
                    </div>
                    <div id="search-history-chips" class="flex flex-wrap gap-2"></div>
                </div>

                <div id="search-results" class="space-y-2 min-h-[200px]"></div>
            </section>

            <!-- Library View -->
            <section id="view-library" class="view-section hidden pt-4 space-y-6 pb-20">
                <div class="flex gap-2 overflow-x-auto no-scrollbar">
                    <button
                        class="bg-white text-black px-5 py-2.5 rounded-full text-xs font-black uppercase tracking-wider shadow-lg flex-shrink-0">Library</button>
                    <button onclick="UI.showCreatePlaylist()"
                        class="bg-zinc-900 text-zinc-400 px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wider border border-white/5 hover:border-white/20 transition flex-shrink-0 flex items-center gap-2"><i
                            data-lucide="plus" class="w-3 h-3"></i> New Playlist</button>
                    <button onclick="LocalFiles.triggerFile()"
                        class="bg-zinc-900 text-zinc-400 px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wider border border-white/5 hover:border-white/20 transition flex-shrink-0 flex items-center gap-2"><i
                            data-lucide="file-audio" class="w-3 h-3"></i> File</button>
                    <button onclick="LocalFiles.triggerFolder()"
                        class="bg-zinc-900 text-zinc-400 px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wider border border-white/5 hover:border-white/20 transition flex-shrink-0 flex items-center gap-2"><i
                            data-lucide="folder-plus" class="w-3 h-3"></i> Folder</button>
                </div>
                <div id="view-local" class="hidden h-full flex flex-col p-4 overflow-y-auto pb-24">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-black text-white tracking-tighter">Local Files</h2>
        <div class="flex gap-2">
            <button onclick="LocalFiles.triggerFile()" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-xs font-bold uppercase hover:bg-blue-500">Import Files</button>
            <button onclick="LocalFiles.clear()" class="px-4 py-2 bg-red-900 text-red-500 border border-red-800 rounded-lg text-xs font-bold uppercase">Clear All</button>
        </div>
    </div>
    <div id="local-list" class="space-y-2">
        <!-- Injected via JS -->
    </div>
</div>
                <div id="library-list" class="space-y-1"></div>
            </section>

            <!-- Artist Detail View -->
            <section id="view-artist" class="view-section hidden pt-4 space-y-8 pb-20">
                <button onclick="UI.back()"
                    class="text-zinc-500 hover:text-white flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest z-10 relative bg-zinc-900/50 px-3 py-1.5 rounded-full w-fit"><i
                        data-lucide="arrow-left" class="w-3 h-3"></i> Back</button>
                <div id="artist-hero"
                    class="space-y-2 relative z-10 animate-in fade-in slide-in-from-bottom-4 duration-500"></div>
                <div id="artist-top-tracks" class="space-y-1 relative z-10"></div>
                <div>
                    <h3 class="text-sm font-bold text-zinc-500 uppercase mb-3">Albums</h3>
                    <div id="artist-albums" class="grid grid-cols-2 gap-4 pb-20 relative z-10"></div>
                </div>
            </section>

            <!-- Playlist Detail View (Dynamic) -->
            <section id="view-playlist" class="view-section hidden pt-4 space-y-6 pb-20">
                <button onclick="UI.back()"
                    class="text-zinc-500 hover:text-white flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest bg-zinc-900/50 px-3 py-1.5 rounded-full w-fit"><i
                        data-lucide="arrow-left" class="w-3 h-3"></i> Back</button>
                <div id="playlist-hero" class="space-y-4 animate-in fade-in duration-500"></div>
                <div id="playlist-tracks" class="space-y-1"></div>
            </section>
        </main>

        <!-- Mini Player -->
        <div id="mini-player"
            class="hidden absolute bottom-24 left-4 right-4 glass rounded-2xl p-2.5 flex items-center gap-3 z-50 border border-white/10 cursor-pointer shadow-2xl transition-all duration-300 transform translate-y-0"
            onclick="UI.togglePlayer(true)">
            <img id="mini-art" src="" class="w-10 h-10 rounded-lg object-cover bg-zinc-900 shadow-lg">
            <div class="flex-1 min-w-0 flex flex-col justify-center">
                <h4 id="mini-title" class="text-xs font-bold truncate text-white">Not Playing</h4>
                <p id="mini-artist" class="text-[10px] text-zinc-500 font-medium truncate uppercase tracking-wider">
                    Select a track</p>
            </div>
            <div class="flex items-center gap-2 pr-2">
                <button onclick="event.stopPropagation(); AudioEngine.toggle()"
                    class="p-2 bg-white/10 rounded-full active:scale-90 transition"><i data-lucide="play"
                        id="mini-play-icon" class="w-4 h-4 fill-white"></i></button>
            </div>
            <div class="absolute bottom-0 left-2 right-2 h-[2px] bg-zinc-800 rounded-full overflow-hidden">
                <div id="mini-progress"
                    class="h-full bg-white w-0 transition-all duration-300 ease-linear rounded-full"></div>
            </div>
        </div>

        <!-- Navigation Bar -->
        <nav class="h-24 glass flex items-center justify-around px-2 pb-2 z-40 relative border-t border-white/5">
            <button onclick="UI.toggleView('home')"
                class="nav-btn active flex flex-col items-center gap-1.5 text-zinc-600 group w-16 transition-colors"
                data-view="home">
                <i data-lucide="home" class="w-5 h-5 group-[.active]:text-white transition-colors"></i>
                <span
                    class="text-[9px] font-bold uppercase tracking-widest group-[.active]:text-white transition-colors">Home</span>
            </button>
            <button onclick="UI.toggleView('search')"
                class="nav-btn flex flex-col items-center gap-1.5 text-zinc-600 group w-16 transition-colors"
                data-view="search">
                <i data-lucide="search" class="w-5 h-5 group-[.active]:text-white transition-colors"></i>
                <span
                    class="text-[9px] font-bold uppercase tracking-widest group-[.active]:text-white transition-colors">Find</span>
            </button>
            <button onclick="UI.toggleView('library');UI.renderLibrary();"
                class="nav-btn flex flex-col items-center gap-1.5 text-zinc-600 group w-16 transition-colors"
                data-view="library">
                <i data-lucide="library" class="w-5 h-5 group-[.active]:text-white transition-colors"></i>
                <span
                    class="text-[9px] font-bold uppercase tracking-widest group-[.active]:text-white transition-colors">Data</span>
            </button>
        </nav>

        <!-- Full Player Overlay -->
        <div id="full-player"
            class="hidden fixed inset-0 z-[100] bg-black translate-y-full transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) flex flex-col">
            <!-- Top Controls -->
            <div class="px-8 pt-12 flex justify-between items-center z-30 relative">
                <button onclick="UI.togglePlayer(false)" class="p-2 text-white/50 hover:text-white transition"><i
                        data-lucide="chevron-down" class="w-6 h-6"></i></button>
                <div class="text-center">
                    <p class="text-[10px] font-bold uppercase tracking-[0.3em] text-zinc-500">Now Streaming</p>
                    <p id="player-quality" class="text-[9px] font-mono text-zinc-600 mt-1 opacity-0 transition">LOSSLESS
                        • 24BIT</p>
                </div>
                <button onclick="UI.toggleLyrics()" class="p-2 text-white/50 hover:text-white transition"><i
                        data-lucide="mic-2" class="w-5 h-5"></i></button>
            </div>

            <!-- Visual Area -->
            <div class="flex-1 flex flex-col items-center justify-center p-6 relative overflow-hidden">
                <!-- High Tech Visualizer Canvas -->
                <canvas id="viz-canvas"></canvas>

                <!-- Album Art -->
                <div
                    class="relative z-10 w-full max-w-[320px] aspect-square rounded-[2rem] overflow-hidden shadow-[0_40px_100px_rgba(255,255,255,0.05)] border border-white/5 ring-1 ring-white/10">
                    <img id="player-art" src="" class="w-full h-full object-cover">
                </div>

                <!-- Lyrics View Overlay -->
                <div id="lyrics-panel"
                    class="hidden absolute inset-0 z-20 flex flex-col pt-24 px-4 pb-32 transition-opacity duration-300">

                    <div id="lyrics-container"
                        class="flex-1 overflow-y-auto no-scrollbar text-center space-y-4 scroll-smooth touch-action-pan-y mask-image-gradient">
                        <!-- Lyrics injected here -->
                    </div>
                    <!-- Gradient mask for scrolling -->
                    <div
                        class="absolute bottom-20 left-0 right-0 h-24 bg-gradient-to-t from-black to-transparent pointer-events-none">
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="px-8 pb-12 space-y-8 relative z-30">
                <div class="flex justify-between items-end">
                    <div class="flex-1 min-w-0 pr-4 space-y-1">
                        <div class="flex items-center gap-2 mb-1">
                            <h2 id="player-title"
                                class="text-2xl font-black truncate text-white leading-tight tracking-tight">Title</h2>
                            <span id="explicit-badge"
                                class="hidden bg-zinc-800 text-zinc-400 text-[9px] font-bold px-1.5 py-0.5 rounded border border-zinc-700">E</span>
                        </div>
                        <p id="player-artist"
                            class="text-zinc-400 font-bold uppercase tracking-widest text-xs hover:text-white transition cursor-pointer active:scale-95 origin-left"
                            onclick="UI.openArtistProfile(State.currentTrack)">Artist</p>
                    </div>
                    <div class="flex gap-4">
                        <button id="like-btn" onclick="Library.toggleLike()"
                            class="p-3 bg-zinc-900 rounded-full transition active:scale-90 border border-white/5 hover:border-white/20 shadow-lg">
                            <i data-lucide="heart" class="w-5 h-5 text-zinc-500"></i>
                        </button>
                        <button onclick="UI.openAddToPlaylist()"
                            class="p-3 bg-zinc-900 rounded-full transition active:scale-90 border border-white/5 hover:border-white/20 shadow-lg">
                            <i data-lucide="plus" class="w-5 h-5 text-zinc-500"></i>
                        </button>
                    </div>
                </div>

                <div class="space-y-3">
                    <input type="range" id="player-progress" value="0" step="0.1"
                        class="w-full h-1 bg-zinc-800 accent-white hover:h-1.5 transition-all"
                        oninput="AudioEngine.seek(this.value)">
                    <div class="flex justify-between text-[10px] font-mono font-medium text-zinc-500">
                        <span id="time-cur">0:00</span>
                        <span id="time-total">0:00</span>
                    </div>
                </div>

                <div class="flex justify-between items-center px-2">
                    <button onclick="Queue.toggleShuffle()" id="shuffle-btn"
                        class="text-zinc-600 p-2 hover:text-white transition active:scale-90"><i data-lucide="shuffle"
                            class="w-5 h-5"></i></button>
                    <button onclick="Queue.prev()"
                        class="text-white p-2 active:scale-90 transition hover:text-zinc-300"><i data-lucide="skip-back"
                            class="w-8 h-8 fill-white"></i></button>
                    <button onclick="AudioEngine.toggle()" id="main-play-btn"
                        class="w-20 h-20 bg-white text-black rounded-full flex items-center justify-center shadow-[0_0_40px_rgba(255,255,255,0.15)] active:scale-95 transition hover:scale-105 border border-white/10">
                        <i data-lucide="play" class="w-8 h-8 fill-black ml-1"></i>
                    </button>
                    <button onclick="Queue.next()"
                        class="text-white p-2 active:scale-90 transition hover:text-zinc-300"><i
                            data-lucide="skip-forward" class="w-8 h-8 fill-white"></i></button>
                    <button onclick="Queue.toggleLoop()" id="loop-btn"
                        class="text-zinc-600 p-2 hover:text-white transition active:scale-90"><i data-lucide="repeat"
                            class="w-5 h-5"></i></button>
                </div>

                <div class="flex justify-center">
                    <button onclick="UI.showQueue()"
                        class="flex flex-col items-center gap-1 text-zinc-600 hover:text-white transition">
                        <i data-lucide="list-music" class="w-4 h-4"></i>
                        <span class="text-[9px] font-bold uppercase tracking-widest">Up Next</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="modal-settings"
            class="hidden fixed inset-0 z-[250] glass p-8 pt-16 flex flex-col animate-in fade-in duration-300">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-black tracking-tight">Settings</h2>
                <button onclick="UI.closeSettings()" class="p-2 hover:bg-white/10 rounded-full"><i data-lucide="x"
                        class="w-6 h-6"></i></button>
            </div>
            <div class="space-y-8 overflow-y-auto no-scrollbar flex-1 pb-10">

                <!-- Account -->
                <div class="space-y-4">
                    <h3 class="text-xs font-bold uppercase tracking-widest text-zinc-500 ml-2">Profile</h3>
                    <div class="flex items-center gap-4 bg-zinc-900/50 p-4 rounded-2xl border border-white/5 shadow-sm">
                        <div
                            class="w-14 h-14 rounded-full bg-gradient-to-tr from-zinc-700 to-zinc-900 flex items-center justify-center border border-white/10">
                            <i data-lucide="user" class="w-6 h-6 text-zinc-300"></i>
                        </div>
                        <div class="flex-1">
                            <input type="text" id="pref-name" onchange="Database.save('user_name', this.value)"
                                class="bg-transparent font-bold text-lg outline-none w-full placeholder-zinc-600 text-white"
                                placeholder="Display Name">
                            <p class="text-[10px] text-zinc-500 uppercase tracking-wider font-bold">SNIPLIT User</p>
                        </div>
                    </div>
                </div>

                <!-- Features -->
                <div class="space-y-5">
                    <h3 class="text-xs font-bold uppercase tracking-widest text-zinc-500 ml-2">Preferences</h3>

                    <div class="flex justify-between items-center py-1 px-2">
                        <div>
                            <span class="text-sm font-bold block">Hi-Res Audio</span>
                            <span class="text-[10px] text-zinc-500 font-medium">Prioritize lossless streams
                                (simulated)</span>
                        </div>
                        <div class="w-11 h-6 bg-zinc-800 rounded-full relative cursor-pointer transition-colors"
                            id="toggle-quality" onclick="UI.toggleSetting('quality', this)">
                            <div
                                class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform duration-200">
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between items-center py-1 px-2">
                        <div>
                            <span class="text-sm font-bold block">Oscilloscope</span>
                            <span class="text-[10px] text-zinc-500 font-medium">Show signal visualization</span>
                        </div>
                        <div class="w-11 h-6 bg-white rounded-full relative cursor-pointer transition-colors"
                            id="toggle-viz" onclick="UI.toggleViz(); UI.toggleSetting('viz', this)">
                            <div
                                class="absolute left-1 top-1 w-4 h-4 bg-black rounded-full transition-transform duration-200 translate-x-5">
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between items-center py-1 px-2">
                        <div>
                            <span class="text-sm font-bold block">Haptic Feedback</span>
                            <span class="text-[10px] text-zinc-500 font-medium">Vibrate on interaction</span>
                        </div>
                        <div class="w-11 h-6 bg-white rounded-full relative cursor-pointer transition-colors"
                            id="toggle-haptics" onclick="UI.toggleSetting('haptics', this)">
                            <div
                                class="absolute left-1 top-1 w-4 h-4 bg-black rounded-full transition-transform duration-200 translate-x-5">
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between items-center py-1 px-2">
                        <div>
                            <span class="text-sm font-bold block">Search History</span>
                            <span class="text-[10px] text-zinc-500 font-medium">Save recent searches</span>
                        </div>
                        <div class="w-11 h-6 bg-white rounded-full relative cursor-pointer transition-colors"
                            id="toggle-history" onclick="UI.toggleSetting('historyEnabled', this)">
                            <div
                                class="absolute left-1 top-1 w-4 h-4 bg-black rounded-full transition-transform duration-200 translate-x-5">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Danger Zone -->
                <div class="pt-8 border-t border-white/5 space-y-4">
                    <a href="https://github.com/ayqshi/SNIPLIT/issues" target="_blank"
                        class="w-full text-left text-zinc-400 text-xs font-bold uppercase tracking-wider py-3 px-2 hover:bg-white/5 rounded-lg transition">Report
                        a Problem</a>
                    <button onclick="Database.clearSearchHistory(); UI.toast('Search History Cleared')"
                        class="w-full text-left text-zinc-400 text-xs font-bold uppercase tracking-wider py-3 px-2 hover:bg-white/5 rounded-lg transition">Clear
                        Search History</button>
                    <button onclick="UI.logout()"
                        class="w-full text-left text-zinc-400 text-xs font-bold uppercase tracking-wider py-3 px-2 hover:bg-white/5 rounded-lg transition">Log
                        Out</button>
                    <button onclick="Database.hardReset()"
                        class="w-full text-left text-red-500 text-xs font-bold uppercase tracking-wider py-3 px-2 hover:bg-red-500/10 rounded-lg transition">Factory
                        Reset App</button>
                    <div class="text-center pt-4">
                        <p class="text-zinc-700 text-[10px] font-mono uppercase">SNIPLIT v1.0.0 • Demo Build 2026</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-queue" class="hidden h-full flex flex-col p-4 overflow-y-auto pb-24 relative">
    <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-black text-white tracking-tighter">Now Playing</h2>
        <button onclick="UI.toggleView('home')" class="p-2 bg-zinc-800 rounded-full text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
    </div>
    <!-- Current Playing Card -->
    <div id="queue-now-playing" class="bg-zinc-800 rounded-2xl p-6 mb-8 shadow-2xl border border-white/5 flex gap-6">
        <!-- Content injected via JS -->
    </div>
    <!-- Up Next List -->
    <h3 class="text-xs font-bold text-zinc-500 uppercase tracking-widest mb-4">Up Next</h3>
    <div id="queue-up-next-list" class="space-y-3">
        <!-- Injected via JS -->
    </div>
</div>

        <!-- Add to Playlist Modal -->
        <div id="modal-add-playlist"
            class="hidden fixed inset-0 z-[260] glass p-6 pt-20 flex flex-col animate-in fade-in">
            <h3 class="text-xl font-black mb-6">Add to Playlist</h3>
            <div id="playlist-select-list" class="space-y-2 overflow-y-auto flex-1"></div>
            <button onclick="document.getElementById('modal-add-playlist').classList.add('hidden')"
                class="mt-4 p-4 text-center text-xs font-bold uppercase text-zinc-500">Cancel</button>
        </div>

        <!-- Wrapped / Analytics View -->
        <div id="wrapped-modal" class="hidden fixed inset-0 z-[300] bg-black overflow-y-auto">
            <div class="min-h-screen flex flex-col items-center justify-center p-6 text-center space-y-8 pb-24">
                <button onclick="document.getElementById('wrapped-modal').classList.add('hidden')"
                    class="absolute top-6 right-6 p-2 bg-white/10 rounded-full hover:bg-white/20"><i data-lucide="x"
                        class="w-6 h-6"></i></button>
                <div id="wrapped-slide-container"
                    class="w-full max-w-sm transition-all duration-500 relative min-h-[400px] flex flex-col justify-center items-center">
                    <!-- Slides -->
                </div>
                <button id="wrapped-next-btn" onclick="Wrapped.nextSlide()"
                    class="hidden px-10 py-4 bg-white text-black rounded-full font-black uppercase tracking-widest text-sm hover:scale-105 transition shadow-[0_0_30px_rgba(255,255,255,0.2)]">Next</button>
            </div>
        </div>

        <!-- Hidden Inputs -->
        <input type="file" id="local-file-input" class="hidden" accept="audio/*" multiple>
        <input type="file" id="local-folder-input" class="hidden" webkitdirectory directory multiple>
    </div>
    <!-- Custom Modals -->
    <div id="ui-alert" class="custom-modal-overlay">
        <div class="custom-modal-box text-center">
            <h3 id="alert-title" class="text-xl font-bold mb-2">Alert</h3>
            <p id="alert-msg" class="text-zinc-400 text-sm mb-6">Message goes here.</p>
            <button onclick="UI.closeAlert()" class="modal-btn modal-btn-primary">OK</button>
        </div>
    </div>

    <div id="ui-confirm" class="custom-modal-overlay">
        <div class="custom-modal-box text-center">
            <h3 id="confirm-title" class="text-xl font-bold mb-2">Confirm</h3>
            <p id="confirm-msg" class="text-zinc-400 text-sm mb-6">Are you sure?</p>
            <div class="flex gap-3">
                <button onclick="UI.closeConfirm()" class="modal-btn modal-btn-secondary">Cancel</button>
                <button id="confirm-yes-btn" class="modal-btn modal-btn-danger">Confirm</button>
            </div>
        </div>
    </div>

    <div id="ui-prompt" class="custom-modal-overlay">
        <div class="custom-modal-box">
            <h3 id="prompt-title" class="text-xl font-bold mb-4">Input</h3>
            <input type="text" id="prompt-input"
                class="w-full bg-black border border-zinc-700 rounded-xl p-3 text-white text-sm outline-none focus:border-white mb-6"
                placeholder="Type here...">
            <div class="flex gap-3">
                <button onclick="UI.closePrompt()" class="modal-btn modal-btn-secondary">Cancel</button>
                <button id="prompt-yes-btn" class="modal-btn modal-btn-primary">Submit</button>
            </div>
        </div>
    </div>
    <!-- Toast Notification -->
    <div id="toast"
        class="fixed top-6 left-1/2 -translate-x-1/2 bg-white text-black px-6 py-3 rounded-full text-xs font-bold uppercase tracking-widest shadow-2xl z-[9999] opacity-0 pointer-events-none transition-opacity duration-300">
        Notification
    </div>
<div id="page-error-cover">
Looks like your browser is unsupported. <br> Try launching the app with a more up to date source.
</div>
    <script src="src\main.js"></script>
</body>

</html>
